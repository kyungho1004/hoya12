# -*- coding: utf-8 -*-
"""
소아 질환별 증상 옵션 정의
- 기본 4개 키는 항상 포함: "콧물", "기침", "설사", "발열"
- 질환별로 추가 키(예: "통증")를 넣을 수 있습니다. UI는 반환된 모든 키를 순회해 렌더링해야 합니다.
"""

from typing import Dict, List

_DEFAULT: Dict[str, List[str]] = {
    "콧물": ["없음", "투명", "흰색", "누런", "피섞임"],
    "기침": ["없음", "조금", "보통", "심함"],
    "설사": ["없음", "1~2회", "3~4회", "5~6회"],
    "발열": ["없음", "37~37.5 (미열)", "37.5~38 (병원 내원 권장)", "38.5~39 (병원/응급실)"],
}

PEDS_SYMPTOM_OPTIONS: Dict[str, Dict[str, List[str]]] = {
    "_default": _DEFAULT,

    # 위장관
    "로타": {
        "콧물": ["없음", "투명"],
        "기침": ["없음", "조금"],
        "설사": ["1~2회", "3~4회", "5~6회"],
        "발열": ["없음", "37~37.5 (미열)", "37.5~38 (병원 내원 권장)"],
    },
    "노로": {
        "콧물": ["없음", "투명"],
        "기침": ["없음", "조금"],
        "설사": ["1~2회", "3~4회", "5~6회"],
        "발열": ["없음", "37~37.5 (미열)", "37.5~38 (병원 내원 권장)"],
    },
    "장염": {
        "콧물": ["없음", "투명"],
        "기침": ["없음", "조금"],
        "설사": ["1~2회", "3~4회", "5~6회"],
        "발열": ["없음", "37~37.5 (미열)", "37.5~38 (병원 내원 권장)"],
    },

    # 호흡기
    "독감": {
        # 콧물 상세
        "콧물": ["없음", "투명", "흰색", "누런", "초록", "피섞임"],
        "기침": ["없음", "보통", "심함"],
        "설사": ["없음", "1~2회"],
        "발열": ["37~37.5 (미열)", "37.5~38 (병원 내원 권장)", "38.5~39 (병원/응급실)"],
    },
    "RSV": {
        "콧물": ["투명", "흰색", "누런"],
        "기침": ["조금", "보통", "심함"],
        "설사": ["없음", "1~2회"],
        "발열": ["없음", "37~37.5 (미열)", "37.5~38 (병원 내원 권장)"],
    },
    "아데노": {
        "콧물": ["없음", "투명", "누런"],
        "기침": ["없음", "조금", "보통"],
        "설사": ["없음", "1~2회"],
        "발열": ["37~37.5 (미열)", "37.5~38 (병원 내원 권장)", "38.5~39 (병원/응급실)"],
    },
    "중이염": {
        "콧물": ["없음", "투명"],
        "기침": ["없음", "조금"],
        "설사": ["없음"],
        "발열": ["없음", "37~37.5 (미열)", "37.5~38 (병원 내원 권장)"],
        # 통증 단계 추가
        "통증": ["없음", "약간", "보통", "심함"],
    },

    # 수족구 (Hand-Foot-Mouth): '부위선택'은 사용하지 않음 (요청에 따라 제외)
    "수족구": {
        "콧물": ["없음", "투명"],
        "기침": ["없음", "조금"],
        "설사": ["없음", "1~2회"],
        "발열": ["없음", "37~37.5 (미열)", "37.5~38 (병원 내원 권장)"],
        "부위": ["입안","손바닥","발바닥","둔부","체간","기타"],
    },
}

def _merge_default(disease: str) -> Dict[str, List[str]]:
    base = dict(_DEFAULT)
    override = PEDS_SYMPTOM_OPTIONS.get(disease, {})
    # include extras in override (e.g., "통증")
    for k, v in override.items():
        base[k] = v
    # Ensure the 4 fundamentals are present
    for k in ("콧물", "기침", "설사", "발열"):
        if k not in base:
            base[k] = _DEFAULT[k]
    return base

def get_symptom_options(disease: str) -> Dict[str, List[str]]:
    disease = (disease or "").strip()
    if not disease:
        return dict(_DEFAULT)
    return _merge_default(disease)

__all__ = ["get_symptom_options", "PEDS_SYMPTOM_OPTIONS"]
