# --- short_caption utility (standalone; no external deps) ---
def short_caption(name: str) -> str:
    t = str(name or "").strip()
    MAP = {
        # 소아(질환) 드롭다운
        "로타": "영유아 설사·구토 우세 — ORS 우선, 탈수 주의.",
        "독감": "갑작스런 고열·전신통 — 초기 항바이러스 고려(의료진).",
        "RSV": "콧물/기침·천명 — 가습/수분, 영아 무호흡 주의.",
        "아데노": "고열 + 인후염/결막염 가능 — 수분·대증, 전염 주의.",
        "마이코": "마른기침 지속 — 흉부사진 고려, 필요 시 마크롤리드.",
        "수족구": "손·발·입 수포/통증 — 진통·수분, 탈수 주의.",
        "편도염": "인후통·고열 — 세균 의심 시 항생제 상담.",
        "코로나": "발열/기침·무증상 가능 — 격리 수칙·대증.",
        "중이염": "귀통증·발열 — 소아는 진료 상담, 필요 시 항생제.",

        # ‘일상’ 모드 자동추정 라벨(소아/성인 규칙 공통)
        "바이럴 장염(비특이)": "설사 다회 — ORS, 소량씩 자주, 기름진 음식 피함.",
        "로타바이러스 장염": "영유아 설사·구토 — ORS, 탈수/경련 주의.",
        "노로바이러스 장염": "구토 우세 — ORS, 손위생 철저.",
        "감기/상기도바이러스": "콧물·기침 중심 — 수분·휴식·가습.",
        "독감(인플루엔자) 의심": "고열·전신통 — 검사/치료 상담.",
        "아데노/편도염 가능": "고열·인후통 — 대증치료, 필요 시 검사.",
        "중이염 가능(동반 의심)": "탁한 콧물 + 발열 — 귀통증 확인·진료 상담.",
        "세균성 결막염 가능": "농성 눈꼽 — 손위생, 점안제 상담.",
        "아데노바이러스 결막염 가능": "양측 결막염·발열 — 전염 주의·대증.",
        "알레르기성 결막염 가능": "가려움·맑은 분비 — 항히스타민 점안 고려.",
        "코로나 가능": "검사/격리 수칙 확인.",
        "세균성 편도/부비동염 가능": "탁한 콧물 + 발열 — 항생제 상담.",
        "장염(바이러스) 의심": "설사 다회 — ORS 우선, 탈수 주의.",
    }
    if t in MAP:
        return MAP[t]
    # 라벨 변형/유사군 일반화 (안전한 기본값)
    if "장염" in t:
        return "설사·구토 — ORS 우선, 탈수 주의."
    if "독감" in t:
        return "고열·전신통 — 검사/치료 상담."
    if "코로나" in t:
        return "검사/격리 수칙·대증요법."
    if "결막염" in t:
        return "눈 위생·전염 주의, 필요 시 점안제."
    return f"{t} — 요약 준비 중."
